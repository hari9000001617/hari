<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> Event Rating Broker (BKR) </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Online Help for Singleview Convergent Billing 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "4573.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "1609.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('4501');highlight('59341')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="4573.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="1609.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Online Help for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h2 class="heading2">Event Rating Broker (BKR)</h2>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic 'Event Rating Broker (BKR)' (59341)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="bodytext">The Event Rating Broker (BKR) process manages the rating engine by controlling the ENM, ERT, and ERO child processes.</p>
<p class="syntaxheading">BKR startup</p>
<p class="bodytext">When it is started, the BKR process (with its <span class="unixoutputc">CACHE_START</span> configuration attribute set to 1) creates inter-process communication mechanisms for ENM, ERT, and ERO processes.  The BKR process then starts all the configured ENM, ERT, and ERO processes that have the ENABLED configuration attribute for each process set to TRUE.</p>
<p class="bodytext">If the <span class="unixoutputc">CACHE_START</span> configuration attribute is set to 1, the BKR process creates the service, customer node, account, rating subtotal, and temporal entitlement caches for the instance.  The BKR retrieves configuration details for the caches from the <span class="unixoutputc">SERVICE_CACHE</span>, <span class="unixoutputc">CUSTOMER_CACHE</span>, <span class="unixoutputc">ACCOUNT_CACHE</span>, <span class="unixoutputc">SUBTOTAL_CACHE</span>, and <span class="unixoutputc">ENTITLEMENT_CACHE</span> configuration items.  For single-instance environments, the BKR retrieves the configuration items for each cache with a sequence number of 1.  For multi-instance environments, the BKR retrieves the configuration items with the matching instance name based on the <span class="unixoutputc">INSTANCE</span> base attribute.</p>
<p class="bodytext">The event cache is started for each BKR process, regardless of the status of the <span class="unixoutputc">CACHE_START</span> configuration attribute.  The <span class="unixoutputc">EVENT_CACHE</span> configuration item used is based on the sequence number of the BKR.</p>
<p class="syntaxheading">BKR processing</p>
<p class="bodytext">The BKR manages the transmission of commands between the ENM, ERT and ERO processes.  If all rating engine processes are running on one machine, the BKR monitors the other processes and passes external commands to them.  If the ENM, ERT, and ERO processes are distributed over a number of machines, the BKR also acts as a message-passing intermediary between them.</p>
<p class="bodytext">The inter-process mechanisms created by the BKR process are used to transmit normalised events from ENM processes to ERT processes for rating, and to transmit normalised events, charges, and details of normalised event files to an ERO process for output.</p>
<p class="bodytext">Multiple BKR processes can exist for each Convergent Billing instance.</p>
<table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="note">Each ENM process on the same machine as the BKR requires three semaphores, each ERT process requires three, and each ERO process requires five.</p></td></tr></table>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="4573.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="1609.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Online Help for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


