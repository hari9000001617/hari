<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> Subtotals </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Online Help for Singleview Convergent Billing 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "1704.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "3857.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('4501');highlight('1700')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="1704.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="3857.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Online Help for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h2 class="heading2">Subtotals</h2>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic 'Subtotals' (1700)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="bodytext">Individual costed data records (billing data) often need to be aggregated so that totals for a service, customer node, or customer can be displayed on the customer&#8217;s invoice.  In large organisations, several levels of aggregation may be required for full breakdown of the total charges into charges for specific departments or types of service.</p>
<p class="bodytext">Event and charge details also need to be aggregated so that accurate calculations can be made for real-time services.  Credit monitoring of postpaid customers requires real-time access to the customer account information (including account balance, current outstanding usage amounts, and the customer's credit limit).</p>
<p class="bodytext">To provide these services, Convergent Billing allows individual costed data records to be aggregated (or subtotalled) in the billing engine at each level of the customer hierarchy.  Rating aggregations are supported for individual customers and services. </p>
<p class="bodytext">To facilitate the storage of aggregations, Convergent Billing supports a special type of variable known as a subtotal.</p>
<p class="bodytext">A subtotal specifies one or more subtotal terms that define the aggregation to be performed using the method specified by one of the following aggregation functions:</p>
<ul class="listbullet"><li class="listbullet">Summation, in which the value of the subtotal is calculated by summing the values of a subtotal term for each match to a costed data record.</li><li class="listbullet">Minimum, in which the value of the subtotal is taken as the minimum calculated value of each eligible subtotal term.</li><li class="listbullet">Maximum, in which the value of the subtotal is taken as the maximum calculated value of each eligible subtotal term.</li></ul><p class="bodytext">The only aggregation function supported for rating subtotals is summation (minimum and maximum aggregation is not supported).  For date type subtotals, only maximum and minimum aggregation is allowed.</p>
<table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="note">The data type returned by each subtotal term must be the same as the data type defined for the subtotal.  Subtotals can have a data type of real, integer, real hash, or integer hash.  Billing subtotals can also have the data types of date, date hash, date array, real array, and integer array.  </p></td></tr></table>
<p class="bodytext">Subtotal terms are selected for aggregation in four stages. In the:</p>
<ul class="listbullet"><li class="listbullet">First stage, the costed data records to be aggregated are identified by application, context, and eligibility.</li><li class="listbullet">Second stage, subtotal eligibility criteria are evaluated to determine which subtotal definitions are applicable.</li><li class="listbullet">Third stage, the subtotal term is evaluated to calculate the value to be passed to the aggregation function.</li><li class="listbullet">Fourth stage, the specified aggregation function is applied to obtain the required subtotal.</li></ul><p class="bodytext">A <a id="h1703" class="jump" title="Subtotal Definition" href="1704.htm" target="_self">subtotal is defined as a variable</a> so that the aggregated data value it contains is available for use in other expressions in the billing process.  Billing subtotals can be accessed using their variable name.  For example, one common use of a subtotal in the billing process is in discount tariff expressions, which are generally applied to aggregated billing data.  In these cases, the subtotal variable (containing the summed value of a set of costed data records) is used in the discount tariff expression to calculate the applicable discount.</p>
<p class="bodytext">Rating subtotals can be accessed during rating using their variable name in the same way that they are used in billing.  Rating subtotals can also be accessed and manually aggregated using available built-in EPM <a id="h1632" class="jump" title="Functions" href="1633.htm" target="_self">functions</a>.  Some of these functions are only available during rating; it is only possible to aggregate the value of a rating subtotal by rating an event.</p>
<p class="bodytext">For more information about subtotals, refer to the <span class="referrals"><a id="h13673" class="jump" title="Customer Care and Product Configuration Guide for Singleview Convergent Billing" href="5535.htm" target="_self">Customer Care and Product Configuration Guide for Singleview Convergent Billing</a></span>.</p>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="1704.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="3857.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Online Help for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


