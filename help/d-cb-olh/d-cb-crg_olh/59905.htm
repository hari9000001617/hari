<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> ProductInstanceComplete&amp;() </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Configurer's Reference Guide for Singleview Convergent Billing 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "58993.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "13500.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('11007');expand('10992');highlight('59905')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="58993.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="13500.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h3 class="heading3">ProductInstanceComplete&amp;()</h3>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic 'ProductInstanceComplete&amp;()' (59905)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="syntaxheading">Syntax</p>
<pre class="unixinputp">ProductInstanceComplete&amp;(    StartDate~,    ProductInstanceId&amp;,    var&nbsp;LastModified~,    var&nbsp;FromAccountTypeId&amp;[],    FromAccountId&amp;[])</pre>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Description</p>
<p class="bodytext">Completes the creation of a product instance from the specified <span class="unixoutputc">StartDate~</span>, or re-completes a previously complete product instance that has had optional services or equipment added.</p>
<p class="syntaxheading">Attributes</p>
<table class="tableintopic" width="288" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="bold">Application Environment</span></p>
</td>
<td style="border:1px solid #010101;" width="108"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="bold">Context</span></p>
</td>
<td style="border:1px solid #010101;" width="108"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="bold">Method</span></p>
</td>
<td style="border:1px solid #010101;" width="108"><p class="tablebodytext">Local</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="180"><p class="tableheading">Parameter</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="516"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="unixoutputc">StartDate~</span></p>
</td>
<td style="border:1px solid #010101;" width="516"><p class="tablebodytext">In:  Date-time on which the product instance is to be completed.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="unixoutputc">ProductInstanceId&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="516"><p class="tablebodytext">In:  ID of the product instance that is to be completed.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="unixoutputc">LastModified~</span></p>
</td>
<td style="border:1px solid #010101;" width="516"><p class="tablebodytext">In:  Last modified date-time of the product to be updated.</p>
<p class="tablebodytext">Out:  Last modified date-time of the updated product.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="unixoutputc">FromAccountTypeId&amp;[]</span></p>
</td>
<td style="border:1px solid #010101;" width="516"><p class="tablebodytext">In/Out:  Array of unique account type IDs of each 'from' account.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="unixoutputc">FromAccountId&amp;[]</span></p>
</td>
<td style="border:1px solid #010101;" width="516"><p class="tablebodytext">In:  Array of account IDs of the accounts chosen for product completion.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Returns</p>
<p class="bodytext">Completion processed again:  1 (TRUE) if successful; otherwise, 0 (FALSE) if the associated services and equipment were not allocated.</p>
<p class="bodytext">Completion:  1 (TRUE) if successful; 0 (FALSE) if From Account information is required, or if the required equipment and services were not allocated.  If not successful, an error is raised.</p>
<p class="syntaxheading">Remarks</p>
<p class="bodytext">If the status of the product instance is <span class="unixoutputc">PRODUCT_CREATION </span>at <span class="unixoutputc">StartDate~</span>,<span class="unixoutputc"> </span>a standard completion is performed.  Otherwise, the product instance has been previously completed, and a re-completion is performed.</p>
<p class="syntaxheading">When to Use This Function</p>
<p class="bodytext">A product instance can only be completed after all its required equipment is allocated, and all services required by it inserted or allocated.  </p>
<p class="bodytext">After a product instance in a product offer hierarchy is modified using <span class="unixoutputc"><a id="h28185" class="jump" title="fEV_ProdInstInsert&amp;()" href="28119.htm" target="_self">fEV_ProdInstInsert&amp;()</a></span> or <span class="unixoutputc"><a id="h28186" class="jump" title="fEV_ProdInstUpdate&amp;()" href="58587.htm" target="_self">fEV_ProdInstUpdate&amp;()</a></span>, re-completion of the base product instance using this function (by calling <span class="unixoutputc"><a id="h57390" class="jump" title="fEV_ProdInstComplete&amp;()" href="58582.htm" target="_self">fEV_ProdInstComplete&amp;()</a></span>) may be required.</p>
<p class="bodytext">Completion of the product instance concludes any pending move or upgrade operation.  This can result in the creation of additional companion product instances, facility group instances, and accounts.  The status codes of associated base product instances can also be updated accordingly.</p>
<p class="syntaxheading">Checks Performed</p>
<p class="bodytext">This function checks: </p>
<ul class="listbullet"><li class="listbullet">All of the equipment and services that are required for the product instance have been created as at the date-time specified by <span class="unixoutputc">StartDate~</span>.  </li><li class="listbullet">When the product instance is part of a product offer hierarchy:<ul class="listdashbullet2"><li class="listdashbullet2">If it has one or more non-cancelled instances of companion products, these companion products are used to check the number of non-cancelled services and the number of in-use equipment items for the base product instance as at <span class="unixoutputc">StartDate~</span> are within the ranges returned by <span class="unixoutputc"><a id="h59167" class="jump" title="ProductSvcEquipRange?[]()" href="59164.htm" target="_self">ProductSvcEquipRange?[]</a></span> .</li><li class="listdashbullet2">Cardinality constraints of each product offer in the hierarchy are met.</li><li class="listdashbullet2">For each product offer in the product offer hierarchy, all mandatory companion products have been instantiated and all mandatory child product offers are selected.</li><li class="listdashbullet2">The number of child product offer instances sold for a product offer is within the range specified by the <span class="unixoutputc">OFFER_MIN</span> and <span class="unixoutputc">OFFER_MAX</span>.</li></ul></li><li class="listbullet">Services and equipment included in the base product instance are also linked with the associated companion product instances, if not included.</li></ul><p class="syntaxheading">Updates Performed</p>
<p class="bodytext">The following are created, if required:</p>
<ul class="listbullet"><li class="listbullet">Charge categories, when no charge categories exist for the product instance.<p class="listcontinue">If the product's tariff has a context of:</p>
<ul class="listdashbullet2"><li class="listdashbullet2">Customer or Customer Node, a customer node charge category record is created.  The details are derived from the customer node type charge category and the charge category records for the tariff (in that order).</li><li class="listdashbullet2">Service, Normalised Event, or Charge, a service charge category record is created.  The details are derived from the customer node, customer node type, and service type charge categories, and the charge category records for the tariff (in that order).<table width="100%" class="tipstyle"><tr><td><p class="tip">Tip:</p><p class="listtip">If the product definition requires creation of charge category information with From Account information, this function returns 0, and an array of account type IDs for which a compatible account must be chosen.  When the accounts have been selected, call this function again with the selected accounts passed in <span class="unixoutputc">FromAccountId&amp;[]</span>, and their corresponding types in <span class="unixoutputc">FromAccountTypeId&amp;[]</span>.</p></td></tr></table>
</li></ul></li><li class="listbullet">A companion product instance, for each contract that requires a companion product.</li><li class="listbullet">Derived attributes, for services and customer nodes are created for associated companion product instances.</li><li class="listbullet">A facility group instance, for each facility group that is standard for the product.</li></ul><p class="bodytext">The following are updated, if required:</p>
<ul class="listbullet"><li class="listbullet"><span class="unixoutputc">PRODUCT_OFFER_INSTANCE_ID</span> and <span class="unixoutputc">PARENT_PROD_OFFER_INSTANCE_ID</span>, for new companion product instances. </li><li class="listbullet"><span class="unixoutputc">PARENT_PROD_OFFER_INSTANCE_ID</span>, for a companion product instance that references non-existing parent product offer instances. <p class="listcontinue">It is updated to reference the nearest antecedent product offer instance.</p>
</li><li class="listbullet"><span class="unixoutputc">TO_ACCOUNT_ID</span>, for the customer node charge category or service charge category. <p class="listcontinue">If the <span class="unixoutputc">TO_ACCOUNT_TYPE</span> is not specified in any of the charge category records, it is set to the prime account of the customer node.</p>
</li></ul><table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="note">If the product instance has a status of Cancelled at a future time (that is, greater than <span class="unixoutputc">StartDate~</span>), any new services, companion products, and facility groups are updated to be cancelled on the same date that the product instance becomes cancelled.</p></td></tr></table>
<p class="syntaxheading">On Completion</p>
<p class="bodytext">If the completion is successful:</p>
<ul class="listbullet"><li class="listbullet">The <span class="unixoutputc">UNCOMPLETED_IND_CODE</span> for the product instance history records are reset to null.</li><li class="listbullet">For the product instance's first completion, the product instance status is updated from a status of <span class="unixoutputc">PRODUCT_CREATION</span> to its configured initial status (as specified by its product definition).  The initial status is typically Provisioning Required, or Active if no external systems are being configured before activation of the product instance.</li></ul><p class="bodytext"><span class="unixoutputc"><a id="h59679" class="jump" title="biProductInstanceComplete&amp;()" href="13020.htm" target="_self">biProductInstancePurge&amp;()</a></span> is called on completion of this function to purge cached product instance details from the server caches.</p>
<p class="syntaxheading">Security Considerations</p>
<p class="bodytext">The effective user must have update security group access level for the customer associated with the record manipulated by this function call.  </p>
<p class="bodytext">The customer security group access level required is determined by the effective start date of the product instance or the effective date supplied by the active user.  If the effective date of the update is less than the current date (00:00:00 timestamp), direct update security group access level is required.  </p>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="58993.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="13500.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


