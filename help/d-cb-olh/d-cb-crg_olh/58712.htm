<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> EntitlementAvailable?[]() </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Configurer's Reference Guide for Singleview Convergent Billing 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "58703.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "77526.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('11007');expand('10992');highlight('58712')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="58703.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="77526.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h3 class="heading3">EntitlementAvailable?[]()</h3>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic 'EntitlementAvailable?[]()' (58712)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="syntaxheading">Syntax</p>
<table class="tableintopic" width="498" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse">
<tr align="left" valign="top">
<td class="tableheading" width="222"><p class="tableheading">Interface 1</p>
</td>
<td width="48"><p class="tablebodytext">&nbsp;</p>
</td>
<td class="tableheading" width="228"><p class="tableheading">Interface 2</p>
</td>
</tr>
<tr align="left" valign="top">
<td width="222"><pre class="unixinputp">EntitlementAvailable?[](    Context&amp;,    EntityId&amp;,    Category&amp;,    EffectiveDate~)&nbsp;</pre>
</td>
<td width="48"><pre class="unixinputp">&nbsp;</pre>
</td>
<td width="228"><pre class="unixinputp">EntitlementAvailable?[](    Context&amp;,    EntityId&amp;,    EffectiveDate~)</pre>
</td>
</tr>
<tr align="left" valign="top">
<td class="tableheading" width="222"><p class="tableheading">Interface 3</p>
</td>
<td width="48"><p class="tablebodytext">&nbsp;</p>
</td>
<td class="tableheading" width="228"><p class="tableheading">Interface 4</p>
</td>
</tr>
<tr align="left" valign="top">
<td width="222"><pre class="unixinputp">EntitlementAvailable?[](    Context&amp;,    EntityId&amp;,    Category&amp;)</pre>
</td>
<td width="48"><pre class="unixinputp">&nbsp;</pre>
</td>
<td width="228"><pre class="unixinputp">EntitlementAvailable?[](    Context&amp;,    EntityId&amp;)</pre>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Description</p>
<p class="bodytext">Fetches information about the available amount of entitlements for an entity, split by allocation.</p>
<p class="syntaxheading">Attributes</p>
<table class="tableintopic" width="288" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="bold">Application Environment</span></p>
</td>
<td style="border:1px solid #010101;" width="108"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="bold">Context</span></p>
</td>
<td style="border:1px solid #010101;" width="108"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext"><span class="bold">Method</span></p>
</td>
<td style="border:1px solid #010101;" width="108"><p class="tablebodytext">Local</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="138"><p class="tableheading">Parameter</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="558"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="138"><p class="tablebodytext"><span class="unixoutputc">Context&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="558"><p class="tablebodytext">In:  Context of the entitlement being fetched. Valid values are:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">2 (Service),</li><li class="tablelistbullet">3 (CustomerNode),</li><li class="tablelistbullet">4 (Customer).</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="138"><p class="tablebodytext"><span class="unixoutputc">EntityId&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="558"><p class="tablebodytext">In:  ID of the entity associated with the entitlement being fetched.</p>
<p class="tablebodytext">If <span class="unixoutputc">Context&amp;</span> is set to:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">2, it must be set to the service ID.</li><li class="tablelistbullet">3 or 4, it must be set to the customer node ID.</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="138"><p class="tablebodytext"><span class="unixoutputc">Category&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="558"><p class="tablebodytext">In:  Reference code of the entitlement category being fetched.</p>
<p class="tablebodytext">It must match a reference code in the <span class="unixoutputc">ENTITLEMENT_CATEGORY</span> reference type.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="138"><p class="tablebodytext"><span class="unixoutputc">EffectiveDate~</span></p>
</td>
<td style="border:1px solid #010101;" width="558"><p class="tablebodytext">In:  Effective date of the fetch.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Returns</p>
<p class="bodytext">Array of hashes, with each hash corresponding to either a cached:</p>
<ul class="listbullet"><li class="listbullet">Allocation matching the supplied parameters</li><li class="listbullet">Entitlement that matches the supplied parameters for which none of its allocations (if any) match the supplied parameters.</li></ul><p class="syntaxheading">Remarks</p>
<p class="bodytext">The following table lists the keys in each hash.</p>
<p class="bodytext">&nbsp;</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="204"><p class="tableheading">Key</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="492"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="204"><p class="tablebodytext"><span class="unixoutputc">EntitlementId</span></p>
</td>
<td style="border:1px solid #010101;" width="492"><p class="tablebodytext">(Long) ID of the entitlement.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="204"><p class="tablebodytext"><span class="unixoutputc">EntitlementSeqNr</span></p>
</td>
<td style="border:1px solid #010101;" width="492"><p class="tablebodytext">(Long) A monotonically-increasing sequence number used by <span class="unixoutputc"><a id="h77608" class="jump" title="EntitlementAllocationInsertRating&amp;()" href="77444.htm" target="_self">EntitlementAllocationInsertRating&amp;()</a></span> to prevent concurrent creation of allocations for the same entitlement during rating.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="204"><p class="tablebodytext"><span class="unixoutputc">Category</span></p>
</td>
<td style="border:1px solid #010101;" width="492"><p class="tablebodytext">(Long) Reference code of the entitlement category associated with this entitlement.  This key is only present if <span class="unixoutputc">Category&amp;</span> is not specified as a parameter to this function.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="204"><p class="tablebodytext"><span class="unixoutputc">SubCategory</span></p>
</td>
<td style="border:1px solid #010101;" width="492"><p class="tablebodytext">(String) Optional sub-category associated with this entitlement. If the entitlement has no sub-category, this key is set to an empty string.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="204"><p class="tablebodytext"><span class="unixoutputc">Priority</span></p>
</td>
<td style="border:1px solid #010101;" width="492"><p class="tablebodytext">(Long) Consumption priority of this entitlement. A lower numerical value is interpreted as a higher priority.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="bodytext">The following table lists the additional keys in each hash if the hash corresponds to a cached allocation.</p>
<p class="bodytext">&nbsp;</p>
<table class="tableintopic" width="774" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="252"><p class="tableheading">Key</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="522"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">AllocationId</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(Long) ID of this allocation.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">StartDate</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(DateTime) Date-time at which this allocation commenced.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">ExpiryDate</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(DateTime) Date-time at which this allocation expires (inclusive).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">Initial</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(Double) Initial amount associated with this allocation.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">Available</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(Double) Amount of this allocation still available for use by this session.</p>
<p class="tablebodytext">If called in rate and return mode or outside of rating, the available amount is reduced by any amounts reserved or consumed on this allocation by other sessions.  </p>
<table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="tablenote">The available amount is not reduced by amounts previously reserved or consumed by this session, as these amounts are available for use by this session.</p></td></tr></table>
<p class="tablebodytext">In rate and store mode, the available amount is only reduced by amounts consumed by other sessions.  Amounts reserved by other sessions are available for use by this session in rate and store mode.</p>
<p class="tablebodytext">The returned amount must be between 0 and <span class="unixoutputc">Initial</span> inclusive.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">Reserved</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(Double) Amount reserved on this allocation by reservations other than the current reservation.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">Consumed</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(Double) Amount consumed on this allocation by reservations other than the current reservation.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">Tag</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(String) Optional tag associated with this allocation.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">PreviousSessionReserved</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(Double) Amount previously reserved by this session and currently stored in the cache, including any manually specified reserved amounts.  This key is only present if the current reservation has previously reserved an amount against this allocation.  The <span class="unixoutputc">Available</span> amount is not reduced by this amount.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">PreviousSessionConsumed</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(Double) Amount previously consumed by this session and currently stored in the cache, including any manually specified consumed amounts.  This key is only present if the current reservation has previously consumed an amount against this allocation.  The <span class="unixoutputc">Available</span> amount is not reduced by this amount.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">CurrentSessionReserved</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(Double) Amount currently reserved by this session in local memory as part of the current <span class="unixoutputc">EventRateAndReturn&amp;()</span> call. This key is only present if the current session has reserved an amount against this allocation as part of the current <span class="unixoutputc">EventRateAndReturn&amp;()</span> call. The <span class="unixoutputc">Available </span>amount is reduced by this amount.</p>
<p class="tablebodytext">The returned value reflects the current total amount that has been reserved or consumed by this session using automatic allocations, which is split into reserved and consumed components on commit.  This total does not include any manually specified reserved or consumed allocations.  </p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">CurrentSessionConsumed</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="tablebodytext">(Double) Amount currently consumed by this session in local memory as part of the current <span class="unixoutputc">EventRateAndReturn&amp;()</span> or <span class="unixoutputc">EventRateAndStore&amp;() </span>call.  This key is only present if the current session has consumed an amount against this allocation as part of the current <span class="unixoutputc">EventRateAndReturn&amp;() </span>or <span class="unixoutputc">EventRateAndStore&amp;()</span> call.  The <span class="unixoutputc">Available</span> amount is reduced by this amount.</p>
<p class="bodytext">This key is only present in <span class="unixoutputc">EventRateAndReturn&amp;()</span> mode if manual allocations are being performed.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">CurrentSessionManuallyReserved</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="bodytext">(Double) Amount currently manually reserved by this session in local memory as part of the current <span class="unixoutputc">EventRateAndReturn&amp;()</span> call. The <span class="unixoutputc">Available </span>amount is reduced by this amount.</p>
<p class="bodytext">&nbsp;</p>
<p class="bodytext">This key is only present in <span class="unixoutputc">EventRateAndReturn&amp;()</span> mode and only if manual allocations are being performed.   </p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="252"><p class="tablebodytext"><span class="unixoutputc">SessionCreated</span></p>
</td>
<td style="border:1px solid #010101;" width="522"><p class="bodytext">(Long) 1 if this allocation is created by <span class="unixoutputc">EntitlementAllocationInsertRating&amp;()</span> during this session.  Otherwise this key is absent.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="bodytext"><span class="unixoutputc">I</span>f an interface is called without the <span class="unixoutputc">EffectiveDate~</span> parameter, the effective date of the expression is used. In a Rating context, it is the charge start date of the event.</p>
<p class="bodytext">&nbsp;</p>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="58703.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="77526.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


