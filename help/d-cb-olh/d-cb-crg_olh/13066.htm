<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> biRatingRestart&amp;() </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Configurer's Reference Guide for Singleview Convergent Billing 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "75929.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "76006.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('11007');expand('10992');highlight('13066')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="75929.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="76006.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h3 class="heading3">biRatingRestart&amp;()</h3>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic 'biRatingRestart&amp;()' (13066)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="syntaxheading">Syntax</p>
<pre class="unixinputp">biRatingRestart&amp;(    RateAndStore&amp;,    Restart&amp;,    const&nbsp;BootService$,    const&nbsp;Service$,    const&nbsp;CoreFunction$,    const&nbsp;InitialiseFunction$)</pre>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Description</p>
<p class="bodytext">Performs a controlled restart and initialisation (or only an initialisation) of all trerate servers, or TRERATE_AND_STORE servers and ERO processes.  If at least two servers are providing the service, clients using rating servers or rating streams should not detect any service loss of the Commerce Engine or OLTP.</p>
<p class="syntaxheading">Attributes</p>
<table class="tableintopic" width="288" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="bold">Application Environment</span></p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="bold">Context</span></p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="bold">Method</span></p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">Remote</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="168"><p class="tableheading">Parameter</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="528"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext"><span class="unixoutputc">RateAndStore&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">In:  Selects the servers to restart or initialise. Valid values are:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">Non-zero (TRUE):  TRERATE_AND_STORE servers and their associated ERO processes.</li><li class="tablelistbullet">0 (FALSE):  all trerate servers.</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext"><span class="unixoutputc">Restart&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">In:  Specifies whether the servers should be restarted or initialised.</p>
<p class="tablebodytext">A non-zero value (TRUE) specifies that the servers are restarted and initialised.  If <span class="unixoutputc">Service$</span> is specified, only servers advertising <span class="unixoutputc">Service$</span> are restarted and initialised.</p>
<p class="tablebodytext">0 (FALSE) specifies that the servers are initialised, not restarted.  If <span class="unixoutputc">BootService$</span> is specified, only servers advertising <span class="unixoutputc">BootService$</span> are initialised.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext"><span class="unixoutputc">BootService$</span></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">In:  Startup or advertised service.  If <span class="unixoutputc">BootService$</span> is specified and:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><span class="unixoutputc">Restart&amp;</span> is a non-zero value (TRUE), Bo<span class="unixoutputc">otService$</span> is the service that the server advertises when it is first booted.</li><li class="tablelistbullet"><span class="unixoutputc">Restart&amp;</span> is 0 (FALSE), Boo<span class="unixoutputc">tService$</span> is the service being advertised by the servers.</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext"><span class="unixoutputc">Service$</span></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">In:  Service to be advertised by the servers after they have been initialised.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext"><span class="unixoutputc">CoreFunction$</span></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">In:  Core function (usually <span class="unixoutputc">biFnEvaluate</span>) used to implement <span class="unixoutputc">Service$</span>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext"><span class="unixoutputc">InitialiseFunction$</span></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">In:  Name of functions to call to initialise a trerate server or associated ERO.</p>
<p class="tablebodytext">The function interface for the function depends on the type of process being restarted, so two functions must be defined with the same name, but different parameters.  The functions must not be defined as remote.</p>
<p class="tablebodytext">If a Tuxedo server is being restarted:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">The function is passed the Tuxedo group ID and server ID of the server in which the function is being invoked.</li><li class="tablelistbullet">The function interface must be: <p class="tablelistcontinue"><span class="unixoutputc">&lt;FunctionName&gt;&amp;(GroupID&amp;,ServerID&amp;)</span></p>
</li></ul><p class="tablebodytext">If an ERO process is being restarted:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">The function is passed the process type name and the process sequence number of the process being restarted.</li><li class="tablelistbullet">The function interface must be:<p class="tablelistcontinue"><span class="unixoutputc">&lt;FunctionName&gt;&amp;(Process$,SeqNr&amp;)</span></p>
</li></ul><p class="tablebodytext">If invoked in an ERO process, there is no method to determine when <span class="unixoutputc">InitialiseFunction$</span> has completed its execution.  It is therefore possible that <span class="unixoutputc">InitialiseFunction$</span> may not finish its execution by the time that the function re-advertises rating services from the restarted rate and store trerate servers (thereby increasing initial event rating latency).</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Returns</p>
<p class="bodytext">Number of trerate servers, or TRERATE_AND_STORE servers and ERO processes, successfully restarted and initialised, or only initialised.  If one or more qualifying servers could not be restarted or initialised successfully, an error is raised.</p>
<p class="syntaxheading">Remarks</p>
<p class="bodytext">The function ensures that all process-specific caches required by the selected servers and processes are appropriately pre-loaded, so that all subsequent rating of real events can be performed within required latency limits.</p>
<p class="bodytext">The function is typically called in the following situations:</p>
<ul class="listbullet"><li class="listbullet">After the rating engine or balance manager is started for the first time.</li><li class="listbullet">Before midnight to ensure that process-specific caches are pre-loaded for the next day's events.</li><li class="listbullet">After configuration changes are loaded into the production system by the archiver.</li><li class="listbullet">After online configuration changes are performed (changes that would take too long to re-load on demand).  An example of such a change is an update to a global derived attribute table that contains more than 100 rows.</li></ul><p class="bodytext">Only servers that are running when the function is called qualify to be restarted.  Inactive servers remain inactive after the call. </p>
<p class="bodytext">The function performs the following:</p>
<ol class="listnumber"><li class="listnumber">Identifies servers (and associated EROs if applicable) that qualify to be restarted and initialised, or only initialised. </li><li class="listnumber">For each server:<ul class="listdashbullet2"><li class="listdashbullet2">If a restart is required, unadvertises <span class="unixoutputc">Service$</span>, shuts down the server (and its ERO), and starts its back up.</li><li class="listdashbullet2">Unadvertises <span class="unixoutputc">BootService$</span> if specified.</li><li class="listdashbullet2">Invokes <span class="unixoutputc">InitialiseFunction$</span> in the server if specified and waits for the function to complete.</li><li class="listdashbullet2">Advertises <span class="unixoutputc">Service$</span> if specified.</li></ul></li></ol><table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="note">The function does not support a clean restart (that is, the same services are not advertised by the servers before and after the restart) if both of the following are true:</p><ul class="notelistbullet"><li class="notelistbullet">The boot service is different from the active Commerce Engine service when the function is called.</li><li class="notelistbullet">There is more than one active Commerce Engine service (for example, both <span class="unixoutputc">biTrerate</span> and <span class="unixoutputc">biRateAndStore</span> are active).</li></td></tr></table></ul><p class="bodytext">To support the above scenarios, a customised version of the function is required.</p>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="75929.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="76006.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


