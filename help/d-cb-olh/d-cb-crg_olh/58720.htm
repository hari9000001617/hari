<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> EntitlementReload&amp;() </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Configurer's Reference Guide for Singleview Convergent Billing 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "77735.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "58439.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('11007');expand('10992');highlight('58720')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="77735.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="58439.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h3 class="heading3">EntitlementReload&amp;()</h3>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic 'EntitlementReload&amp;()' (58720)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="syntaxheading">Syntax</p>
<table class="tableintopic" width="408" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse">
<tr align="left" valign="top">
<td class="tableheading" width="180"><p class="tableheading">Interface 1</p>
</td>
<td width="48"><p class="tablebodytext">&nbsp;</p>
</td>
<td class="tableheading" width="180"><p class="tableheading">Interface 2</p>
</td>
</tr>
<tr align="left" valign="top">
<td width="180"><pre class="unixinputp">EntitlementReload&amp;(    EntitlementId&amp;,    OpCode&amp;,    StartDate~)</pre>
</td>
<td width="48"><pre class="unixinputp">&nbsp;</pre>
</td>
<td width="180"><pre class="unixinputp">EntitlementReload&amp;(    EntitlementId&amp;,    AllocationId&amp;,    OpCode&amp;,    StartDate~)</pre>
</td>
</tr>

</table>
<p class="syntaxheading">Description</p>
<p class="bodytext">Updates the cache details of an entitlement or an allocation.</p>
<p class="syntaxheading">Attributes</p>
<table class="tableintopic" width="306" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><span class="bold">Function Type</span></p>
</td>
<td style="border:1px solid #010101;" width="132"><p class="tablebodytext">Local</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><span class="bold">Service</span></p>
</td>
<td style="border:1px solid #010101;" width="132"><p class="tablebodytext">(Local)</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><span class="bold">Application Environment</span></p>
</td>
<td style="border:1px solid #010101;" width="132"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><span class="bold">Context</span></p>
</td>
<td style="border:1px solid #010101;" width="132"><p class="tablebodytext">Any</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<table class="tableintopic" width="690" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="132"><p class="tableheading">Parameter</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="558"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="132"><p class="tablebodytext"><span class="unixoutputc">EntitlementId&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="558"><p class="tablebodytext">In:  ID of the entitlement to be updated in the cache.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="132"><p class="tablebodytext"><span class="unixoutputc">AllocationId&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="558"><p class="tablebodytext">In:  ID of the allocation to be updated in the cache.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="132"><p class="tablebodytext"><span class="unixoutputc">OpCode&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="558"><p class="tablebodytext">In:  Operations to perform on the row.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="132"><p class="tablebodytext"><span class="unixoutputc">StartDate~</span></p>
</td>
<td style="border:1px solid #010101;" width="558"><p class="tablebodytext">In:  Start date-time for entitlement or allocation records.</p>
<p class="tablebodytext">It is ignored for deletes.</p>
<p class="tablebodytext">Entitlements or allocation are queried with an expiry date equal to or after this date.  </p>
<p class="tablebodytext">For entitlement inserts <span class="unixoutputc">StartDate~</span> should be set to the start date of the entitlement; this parameter assists with Oracle partition elimination.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Returns</p>
<p class="bodytext">1 if successful; otherwise, 0.</p>
<p class="syntaxheading">Remarks</p>
<p class="bodytext">For allocation inserts, the allocation is loaded from the database and added to the cache. The function returns successfully with a return value of 0, if one of the following occurs:</p>
<ul class="listbullet"><li class="listbullet">The associated entitlement is not currently cached</li><li class="listbullet">The allocation is already cached</li><li class="listbullet">The allocation expiry date is before the entitlement's <span class="unixoutputc"><a id="h75393" class="jump" title="CacheFromDate" href="75377.htm#o75392" target="_self">CacheFromDate</a></span>.</li></ul><p class="bodytext">For allocation updates:</p>
<ul class="listbullet"><li class="listbullet">The allocation is loaded from the database and updated in the cache. If the associated entitlement is:<ul class="listdashbullet2"><li class="listdashbullet2">Not currently cached, the function returns successfully with a return value of 0 </li><li class="listdashbullet2">Currently cached but the allocation is not, the operation behaves as an insert. </li></ul></li><li class="listbullet">If the allocation has no remaining available amount, it is purged from the cache.</li></ul><p class="bodytext">For entitlement inserts: </p>
<ul class="listbullet"><li class="listbullet">Each associated entity is fetched from the cache and associated with the entitlement. Entities not currently cached are ignored. All allocations with an expiry date on or after <span class="unixoutputc">StartDate~</span> are also loaded from the database and inserted into the cache.</li><li class="listbullet">If the entitlement does not exist on or after <span class="unixoutputc">StartDate~</span>, 0 is returned. </li><li class="listbullet">If the entitlement exists, is suspended and has no allocation database records, the function returns 0 if the entitlement is not cached; if the entitlement is cached, the function deletes it from the cache and returns 1.   </li><li class="listbullet">Otherwise, the entitlement and all entity associations are loaded from the database. If at least one of its entities is cached, the entitlement is added to the cache and 1 is returned. If none of its entities are cached, the entitlement is not cached and 0 is returned. </li></ul><p class="bodytext">For entitlement updates, the entitlement is loaded from the database. If the entitlement is:</p>
<ul class="listbullet"><li class="listbullet">Suspended and has no allocation database records, it is handled in the same way as for an insert; otherwise, the entitlement is updated in the cache, and all associated allocations with an expiry date on or after the lesser of the entitlement's current <span class="unixoutputc"><a id="h75393_2" class="jump" title="CacheFromDate" href="75377.htm#o75392" target="_self">CacheFromDate</a></span> and <span class="unixoutputc">StartDate~</span> are also loaded from the database and inserted into the cache. </li><li class="listbullet">Not currently stored in the cache, the operation behaves as an insert.</li></ul><p class="bodytext">For deletes, the entitlement or allocation is purged from the cache. Deleting an entitlement also deletes all its allocations. If the entitlement or allocation is not currently cached, the function returns successfully with a return value of 0. If an allocation has an associated reservation or an uncommitted delta, the function fails with an error.</p>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="77735.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="58439.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


