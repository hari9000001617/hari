<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> &lt;AdjustmentFunctionName&gt;&amp;() </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Configurer's Reference Guide for Singleview Convergent Billing 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "57643.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "11058.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('11007');expand('10992');highlight('59091')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="57643.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="11058.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h3 class="heading3">&lt;AdjustmentFunctionName&gt;&amp;()</h3>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic '&lt;AdjustmentFunctionName&gt;&amp;()' (59091)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="syntaxheading">Syntax</p>
<table class="tableintopic" width="546" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse">
<tr align="left" valign="top">
<td class="tableheading" width="264"><p class="tableheading">Interface 1</p>
</td>
<td width="48"><p class="tablebodytext">&nbsp;</p>
</td>
<td class="tableheading" width="234"><p class="tableheading">Interface 2</p>
</td>
</tr>
<tr align="left" valign="top">
<td width="264"><pre class="unixinputp">&lt;AdjustmentFunctionName&gt;&amp;(    AccountId&amp;,    TotalAmount#,    AdjustmentTypeId&amp;,    Effective Date~,    var InvoiceId&amp;[]    var InvoiceLastModified~[]    var ReceivableTypeId&amp;[]    var Amount#[])</pre>
</td>
<td width="48"><pre class="unixinputp">&nbsp;</pre>
</td>
<td width="234"><pre class="unixinputp">&lt;AdjustmentFunctionName&gt;&amp;(    AccountId&amp;,    TotalAmount#,    AdjustmentTypeId&amp;,    Effective Date~,    var Allocations?[])</pre>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Description</p>
<p class="bodytext">Determines the initial allocations to invoices and receivable types for adjustments. This is a template function used to create user-defined functions.</p>
<p class="bodytext">Interface 1 is a deprecated function that is used for backward compatibility with Singleview v6.01 and earlier.</p>
<p class="syntaxheading">Attributes</p>
<table class="tableintopic" width="288" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="187"><p class="tablebodytext"><span class="bold">Application Environment</span></p>
</td>
<td style="border:1px solid #010101;" width="101"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="187"><p class="tablebodytext"><span class="bold">Context</span></p>
</td>
<td style="border:1px solid #010101;" width="101"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="187"><p class="tablebodytext"><span class="bold">Method</span></p>
</td>
<td style="border:1px solid #010101;" width="101"><p class="tablebodytext">Remote</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="194"><p class="tableheading">Parameter</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="502"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="194"><p class="tablebodytext"><span class="unixoutputc">AccountId&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="502"><p class="tablebodytext">In:  ID of the account allocated an adjustment.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="194"><p class="tablebodytext"><span class="unixoutputc">TotalAmount#</span></p>
</td>
<td style="border:1px solid #010101;" width="502"><p class="tablebodytext">In:  Total amount of the adjustment.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="194"><p class="tablebodytext"><span class="unixoutputc">AdjustmentTypeId&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="502"><p class="tablebodytext">In:  ID of the adjustment type.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="194"><p class="tablebodytext"><span class="unixoutputc">EffectiveDate~</span></p>
</td>
<td style="border:1px solid #010101;" width="502"><p class="tablebodytext">In:  Date-time that the adjustment is applied to the account.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="194"><p class="tablebodytext"><span class="unixoutputc">InvoiceId&amp;[]</span></p>
</td>
<td style="border:1px solid #010101;" width="502"><p class="tablebodytext">In:  Performs allocations only for the specified invoice.</p>
<p class="tablebodytext">Out:  Returns the set of invoices for which allocations have been made. If a single invoice ID is supplied, the allocation is only performed for that invoice.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="194"><p class="tablebodytext"><span class="unixoutputc">InvoiceLastModified~[]</span></p>
</td>
<td style="border:1px solid #010101;" width="502"><p class="tablebodytext">Out:  Last modified date-time of the updated invoices.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="194"><p class="tablebodytext"><span class="unixoutputc">ReceivableTypeId&amp;[]</span></p>
</td>
<td style="border:1px solid #010101;" width="502"><p class="tablebodytext">Out:  ID of the receivable type.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="194"><p class="tablebodytext"><span class="unixoutputc">Amount#[]</span></p>
</td>
<td style="border:1px solid #010101;" width="502"><p class="tablebodytext">Out:  Amount of each adjustment.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="194"><p class="tablebodytext"><span class="unixoutputc">Allocations?[]</span></p>
</td>
<td style="border:1px solid #010101;" width="502"><p class="tablebodytext">In:  Single array, containing a single key of <span class="unixoutputc">INVOICE_ID</span> or <span class="unixoutputc">ADJUSTMENT_ID </span>for the allocation. If specified, allocations are performed for the specified ID.</p>
<p class="tablebodytext">Out:  Array of hashes containing results of allocations.</p>
<p class="tablebodytext">The table below lists the entries present in the hash.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Returns</p>
<p class="bodytext">1 (TRUE) if successful; otherwise, an error is raised.</p>
<p class="syntaxheading">Remarks</p>
<p class="bodytext">The following table lists the keys for the <span class="unixoutputc">Allocations?[]</span> hash.</p>
<p class="bodytext">&nbsp;</p>
<p class="caption">Allocations?[] Hash Keys</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th class="tableheading" style="border:1px solid #010101;" width="192"><p class="tableheading">Keys</p>
</th>
<th class="tableheading" style="border:1px solid #010101;" width="504"><p class="tableheading">Description</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="unixoutputc">INVOICE_ID</span></p>
</td>
<td style="border:1px solid #010101;" width="504"><p class="tablebodytext">ID of invoice that has an allocation applied.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="unixoutputc">ADJUSTMENT_ID</span></p>
</td>
<td style="border:1px solid #010101;" width="504"><p class="tablebodytext">ID of adjustment that has an allocation applied.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="unixoutputc">LAST_MODIFIED</span></p>
</td>
<td style="border:1px solid #010101;" width="504"><p class="tablebodytext">Receivable type of the specified allocation.</p>
<p class="tablebodytext">It is only present if <span class="unixoutputc">INVOICE_ID</span> or <span class="unixoutputc">ADJUSTMENT_ID</span> is specified.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="unixoutputc">RECEIVABLE_TYPE_ID</span></p>
</td>
<td style="border:1px solid #010101;" width="504"><p class="tablebodytext">Receivable type (if applicable) of the specified allocation.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="unixoutputc">AMOUNT</span></p>
</td>
<td style="border:1px solid #010101;" width="504"><p class="tablebodytext">Amount of the allocation in the currency of the account.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="note">A maximum of one <span class="unixoutputc">INVOICE_ID</span> or <span class="unixoutputc">ADJUSTMENT_ID</span> key can be present in each hash. If no ID key is present, <span class="unixoutputc">AMOUNT</span> is regarded as unallocated, and debited or credited to the account specified in <span class="unixoutputc">AccountId&amp;</span>.</p></td></tr></table>
<p class="bodytext">A customised allocation function must meet the interface conditions listed in the following table. These requirements are not enforced when the function is created in the client, but are enforced when the function is called during the allocation process.</p>
<p class="bodytext">&nbsp;</p>
<p class="caption">Interface Conditions</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th class="tableheading" style="border:1px solid #010101;" width="102"><p class="tableheading">Interface Number</p>
</th>
<th class="tableheading" style="border:1px solid #010101;" width="594"><p class="tableheading">Condition</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="102"><p class="tablebodytext">1</p>
</td>
<td style="border:1px solid #010101;" width="594"><p class="tablebodytext">The size of the returned <span class="unixoutputc">InvoiceId&amp;[]</span>, <span class="unixoutputc">ReceivableTypeId&amp;[]</span>, and <span class="unixoutputc">Amount#[]</span> arrays must be identical, and greater than 0.</p>
<p class="tablebodytext">The sum of the amounts in <span class="unixoutputc">Amount#[]</span> must equal <span class="unixoutputc">TotalAmount#</span>.</p>
<p class="tablebodytext">No element in <span class="unixoutputc">Amount#[]</span> can have an undefined value; the values can be positive or negative.</p>
<p class="tablebodytext">Elements in the returned <span class="unixoutputc">InvoiceId&amp;[]</span> and <span class="unixoutputc">ReceivableTypeId&amp;[]</span> arrays can be undefined.</p>
<p class="tablebodytext">An undefined <span class="unixoutputc">InvoiceId&amp;[]</span> element is treated as an account credit or debit amount.</p>
<p class="tablebodytext">An undefined <span class="unixoutputc">ReceivableTypeId&amp;[]</span> element can be returned if receivable types are not configured, or if no receivable type is allocated to an amount (usually if an amount is not associated with an <span class="unixoutputc">InvoiceId&amp;[]</span>).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="102"><p class="tablebodytext">2</p>
</td>
<td style="border:1px solid #010101;" width="594"><p class="tablebodytext">The sum of the amounts associated with the <span class="unixoutputc">AMOUNT</span> key must equal <span class="unixoutputc">TotalAmount#</span>.</p>
<p class="tablebodytext">No element associated with the <span class="unixoutputc">AMOUNT</span> key can have an undefined value; the values can be positive or negative.</p>
<p class="tablebodytext">In each hash, only one of the following keys can be specified:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><span class="unixoutputc">INVOICE_ID</span></li><li class="tablelistbullet"><span class="unixoutputc">ADJUSTMENT_ID</span></li><li class="tablelistbullet"><span class="unixoutputc">PAYMENT_ID</span>.</li></ul><p class="tablebodytext">If none of the keys are present, the allocation is applied as a credit or debit to the account. A <span class="unixoutputc">RECEIVABLE_TYPE_ID</span> may be associated with the allocation.</p>
<p class="tablebodytext">If only a single entry is specified on input for <span class="unixoutputc">Allocations?[]</span>, the allocation function can only perform the allocation for a single invoice, payment, or adjustment entry.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="57643.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="11058.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


