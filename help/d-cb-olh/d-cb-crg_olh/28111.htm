<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> fEV_PaymentUpdate&amp;() </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Configurer's Reference Guide for Singleview Convergent Billing 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "42780.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "28112.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('51544');expand('28068');expand('45618');highlight('28111')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="42780.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="28112.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h4 class="heading4">fEV_PaymentUpdate&amp;()</h4>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic 'fEV_PaymentUpdate&amp;()' (28111)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="syntaxheading">Syntax</p>
<table class="tableintopic" width="516" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse">
<tr align="left" valign="top">
<td class="tableheading" width="228"><p class="tableheading">Interface 1</p>
</td>
<td width="48"><p class="tablebodytext">&nbsp;</p>
</td>
<td class="tableheading" width="240"><p class="tableheading">Interface 2</p>
</td>
</tr>
<tr align="left" valign="top">
<td width="228"><pre class="unixinputp">fEV_PaymentUpdate&amp;(    paymentId&amp;,    var lastModified~,    const fieldValues?{})</pre>
</td>
<td width="48"><p class="tablebodytext">&nbsp;</p>
</td>
<td width="240"><pre class="unixinputp">fEV_PaymentUpdate&amp;(    paymentId&amp;,    var lastModified~,    const fieldNames$[],    const fieldValues?[])&nbsp;</pre>
</td>
</tr>
<tr align="left" valign="top">
<td class="tableheading" width="228"><p class="tableheading">Interface 3</p>
</td>
<td width="48"><p class="tablebodytext">&nbsp;</p>
</td>
<td class="tableheading" width="240"><p class="tableheading">Interface 4</p>
</td>
</tr>
<tr align="left" valign="top">
<td width="228"><pre class="unixinputp">fEV_PaymentUpdate&amp;(    const Keys?{},    var LastModified~,    const FieldValues?{})</pre>
</td>
<td width="48"><p class="tablebodytext">&nbsp;</p>
</td>
<td width="240"><pre class="unixinputp">fEV_PaymentUpdate&amp;(    const Keys?{},    var LastModified~,    const FieldValues?{},    var IdentifierKeys?{})</pre>
</td>
</tr>

</table>
<p class="syntaxheading">Description</p>
<p class="bodytext">Updates a payment in the database.  The function is similar to and wraps the <span class="unixoutputc">biPaymentUpdate&amp;()</span> function.  </p>
<p class="syntaxheading">Context</p>
<p class="bodytext">The following groups of variables are available throughout all stages of processing a payment update request, except where otherwise specified:</p>
<ul class="listbullet"><li class="listbullet">System client</li><li class="listbullet">Operator</li><li class="listbullet">Miscellaneous<ul class="listdashbullet2"><li class="listdashbullet2"><span class="unixoutputc">evFormCode$</span> contains the value <span class="unixoutputc">PAYDSVR</span>.</li><li class="listdashbullet2"><span class="unixoutputc">evLastRowInd&amp;</span> contains the value <span class="unixoutputc">0</span> during all stages of processing except for the evaluation of the payment pre-commit expressions.</li><li class="listdashbullet2"><span class="unixoutputc">evRowStatus$</span> contains the value <span class="unixoutputc">Update</span>.</li></ul></li><li class="listbullet">Payment<ul class="listdashbullet2"><li class="listdashbullet2"><span class="unixoutputc">evPaydReject&amp;</span> contains the value of 1 if <span class="unixoutputc">REJECT_IND_CODE</span> is specified and the payment is to be rejected.</li></ul></li></ul><p class="syntaxheading">Parameters</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="162"><p class="tableheading">Parameter</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="534"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="162"><p class="tablebodytext"><span class="unixoutputc">paymentId&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="534"><p class="tablebodytext">ID of the payment being updated.</p>
<p class="tablebodytext">A payment with the specified ID must exist in the database; otherwise, an error is raised.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="162"><p class="tablebodytext"><span class="unixoutputc">Keys?{}</span></p>
</td>
<td style="border:1px solid #010101;" width="534"><p class="tablebodytext">Keys used to identify the payment being updated.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="162"><p class="tablebodytext"><span class="unixoutputc">lastModified~</span></p>
<p class="tablebodytext"><span class="unixoutputc">LastModified~</span></p>
</td>
<td style="border:1px solid #010101;" width="534"><p class="tablebodytext">Initial value must match the value in the record matching the specified <span class="unixoutputc">paymentId&amp;</span>, or identified by <span class="unixoutputc">Keys?{}</span>, if <span class="unixoutputc">Keys?{}</span> is specified.</p>
<p class="tablebodytext">If <span class="unixoutputc">Keys?{}</span> is specified, <span class="unixoutputc">lastModified~</span> can be undefined.</p>
<p class="tablebodytext">If <span class="unixoutputc">lastModified~</span> is not defined, it is automatically derived.</p>
<p class="tablebodytext">On successful return, the value is the date-time of this update.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="162"><p class="tablebodytext"><span class="unixoutputc">fieldValues?{}</span></p>
<p class="tablebodytext"><span class="unixoutputc">fieldNames$[]</span></p>
<p class="tablebodytext"><span class="unixoutputc">fieldValues?[]</span></p>
<p class="tablebodytext"><span class="unixoutputc">FieldValues?{}</span></p>
</td>
<td style="border:1px solid #010101;" width="534"><p class="tablebodytext">Data to be updated for the specified payment.</p>
<p class="tablebodytext">The data can be keyed according to the corresponding column name in the <span class="unixoutputc">PAYMENT_TRE_V</span> view.  When keyed according to database column name, data passed must match the type and value stored in the database.</p>
<table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="tablenote"><span class="unixoutputc">REJECT_IND_CODE</span> column is not stored in the <span class="unixoutputc">PAYMENT_TRE_V</span> view.  It is used to indicate that the payment is to be rejected. </p></td></tr></table>
<p class="tablebodytext">If the payment is to be rejected, any values specified for the following are updated during rejection processing instead of update processing:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><span class="unixoutputc">REJECTED_DATE</span></li><li class="tablelistbullet"><span class="unixoutputc">PAYMENT_REJECTED_CODE</span></li><li class="tablelistbullet"><span class="unixoutputc">FROM_REJECTED_GL_CODE</span></li><li class="tablelistbullet"><span class="unixoutputc">FROM_REJECTED_GL_CODE_NAME</span></li><li class="tablelistbullet"><span class="unixoutputc">TO_REJECTED_GL_CODE_ID</span></li><li class="tablelistbullet"><span class="unixoutputc">TO_REJECTED_GL_CODE_NAME</span></li><li class="tablelistbullet"><span class="unixoutputc">CREDIT_REJECTED_GL_CODE_NAME</span></li><li class="tablelistbullet"><span class="unixoutputc">CREDIT_REJECTED_GL_CODE_ID</span></li><li class="tablelistbullet"><span class="unixoutputc">DEBIT_REJECTED_GL_CODE_NAME</span></li><li class="tablelistbullet"><span class="unixoutputc">DEBIT_REJECTED_GL_CODE_ID</span>.</li></ul><p class="tablebodytext">If attribute validation is enabled, data can also be keyed by a label specified in the appropriate entity validation, or in Convergent Billing defaults.</p>
<p class="tablebodytext">When keyed by interface or display label, data passed must match the type and value expected as defined in the appropriate attribute type.  Denormalised fields must pass the denormalised string values.  Other fields must pass data of the type defined in the attribute type.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="162"><p class="tablebodytext"><span class="unixoutputc">IdentifierKeys?{}</span></p>
</td>
<td style="border:1px solid #010101;" width="534"><p class="tablebodytext">Populated on successful return with the values of the <span class="unixoutputc">PAYMENT</span> identifier fields derived from <span class="unixoutputc">Keys?{}</span>.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Processing</p>
<p class="bodytext">If <span class="unixoutputc">Keys?{}</span> is specified, calls the payment key lookup function to retrieve the payment ID to use.  If the lookup function does not find a unique payment, an error is raised.</p>
<p class="bodytext">Assuming that all processing stages are enabled, the following list is the order of evaluation of expressions and constraints before update of the payment:</p>
<ol class="listnumber"><li class="listnumber">Bundle direct variables if the call is nested.</li><li class="listnumber">Decrypt any encrypted values and mask any appropriate values. </li><li class="listnumber">Apply attribute type defaults and validation.</li><li class="listnumber">Evaluate payment defaults.</li><li class="listnumber">Check payment mandatory fields.</li><li class="listnumber">Evaluate payment attribute type validation expressions.</li><li class="listnumber">Evaluate payment row expressions.</li><li class="listnumber">Evaluate payment pre-commit expressions.</li><li class="listnumber">Unmask any masked values and encrypt any variable values configured for encryption.</li></ol><p class="bodytext">On performing the update, the following sequence of actions occurs:</p>
<ol class="listnumber"><li class="listnumber">Evaluate payment in-transaction expressions.</li><li class="listnumber">Queue and evaluate payment post-commit expressions.</li></ol><p class="bodytext">After update and evaluation of the post-commit expressions:</p>
<ol class="listnumber"><li class="listnumber">Unbundle variables that were stored in step 1 before the update.</li></ol><p class="bodytext">Following the update, if <span class="unixoutputc">evPaydReject&amp;</span> has a value of 1 and <span class="unixoutputc">evPaydRejectedDate~</span> is specified, the payment is rejected using <span class="unixoutputc">PaymentReject&amp;()</span>.</p>
<p class="syntaxheading">Returns</p>
<p class="bodytext">On success, a non-zero value.  If the update or any of the pre-update validation steps fail, an error is raised.</p>
<p class="syntaxheading">Remarks</p>
<p class="bodytext">A payment is rejected if <span class="unixoutputc">REJECT_IND_CODE</span> has a value of 1 and <span class="unixoutputc">REJECTED_DATE</span> is specified.  Rejection occurs after update.</p>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="42780.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="28112.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


