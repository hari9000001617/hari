<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> EntitlementUpdate&amp;() </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Configurer's Reference Guide for Singleview Convergent Billing 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "58416.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "60596.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('11007');expand('10992');highlight('58365')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="58416.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="60596.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h3 class="heading3">EntitlementUpdate&amp;()</h3>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic 'EntitlementUpdate&amp;()' (58365)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="syntaxheading">Syntax</p>
<pre class="unixinputp">EntitlementUpdate&amp;(    EntitlementId&amp;,    OldEffectiveDate~,    var&nbsp;LastModified~,    const FieldNames$[],    FieldValues?[])</pre>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Description</p>
<p class="bodytext">Updates an entitlement.</p>
<p class="syntaxheading">Attributes</p>
<table class="tableintopic" width="288" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="bold">Application Environment</span></p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="bold">Context</span></p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">Any</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="192"><p class="tablebodytext"><span class="bold">Method</span></p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">Local</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="150"><p class="tableheading">Parameter</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="546"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="150"><p class="tablebodytext"><span class="unixoutputc">EntitlementId&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="546"><p class="tablebodytext">In:  ID of the entitlement to be updated.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="150"><p class="tablebodytext"><span class="unixoutputc">OldEffectiveDate~</span></p>
</td>
<td style="border:1px solid #010101;" width="546"><p class="tablebodytext">In: Effective date of the record to be updated.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="150"><p class="tablebodytext"><span class="unixoutputc">LastModified~</span></p>
</td>
<td style="border:1px solid #010101;" width="546"><p class="tablebodytext">In:  Last modified date-time of the entitlement to be updated.</p>
<p class="tablebodytext">Out:  Last modified date-time of the updated entitlement.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="150"><p class="tablebodytext"><span class="unixoutputc">FieldNames$[]</span></p>
</td>
<td style="border:1px solid #010101;" width="546"><p class="tablebodytext">In:  Names of fields from <span class="unixoutputc"><a id="h58595" class="jump" title="ENTITLEMENT_TRE_V" href="57436.htm" target="_self">ENTITLEMENT_TRE_V</a></span> view being updated.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="150"><p class="tablebodytext"><span class="unixoutputc">FieldValues?[]</span></p>
</td>
<td style="border:1px solid #010101;" width="546"><p class="tablebodytext">In:  Field values in the same order that their names are specified in <span class="unixoutputc">FieldNames$[]</span> </p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Returns</p>
<p class="bodytext">1 (TRUE) if successful; otherwise, an error is raised.</p>
<p class="syntaxheading">Remarks</p>
<p class="bodytext">If <span class="unixoutputc">EXPIRY_DATE</span> is updated:</p>
<ul class="listbullet"><li class="listbullet">It must be no later than the current effective date range for the entitlement.</li><li class="listbullet">It can be one second earlier than <span class="unixoutputc">START_DATE</span> for a backdated cancellation of a product instance. <p class="listcontinue">In this case, no new allocations are created for the entitlement.</p>
</li><li class="listbullet">The <span class="unixoutputc">EXPIRY_DATE</span> of each allocation associated with the entitlement with an <span class="unixoutputc">EXPIRY_DATE</span> later than the new expiry date is also updated.<p class="listcontinue">This may cause an allocation's <span class="unixoutputc">START_DATE</span> to be later than its <span class="unixoutputc">EXPIRY_DATE</span>. In this case, the allocation is unavailable for consumption.</p>
</li><li class="listbullet">Expiry and warning functions are automatically rescheduled to align with the new expiry date.<table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="listnote">If the entitlement is being reactivated, and expiry or warning functions are scheduled to execute in the past, the expiry or warning functions are rescheduled to run immediately and added to the scheduled function queue.</p></td></tr></table>
</li></ul><p class="bodytext">The <span class="unixoutputc">NEXT_ALLOCATION_DATE</span> is updated and the allocation function rescheduled if the new expiry date is later than the new start date of the next allocation.</p>
<p class="bodytext"><span class="unixoutputc">RECURRING_ALLOCATION_AMOUNT</span> can only be defined when the entitlement is recurring or if the entitlement is being updated to recurring.</p>
<p class="bodytext">If the entitlement is being updated to:</p>
<ul class="listbullet"><li class="listbullet">One-off:<ul class="listdashbullet2"><li class="listdashbullet2"><span class="unixoutputc">INITIAL_ALLOCATION_AMOUNT</span> and <span class="unixoutputc">ALLOC_GEN_ADVANCE_PERIOD</span> must be defined with a value of zero or greater.</li></ul></li><li class="listbullet">Dynamic:<ul class="listdashbullet2"><li class="listdashbullet2"><span class="unixoutputc">INITIAL_ALLOCATION_AMOUNT</span> and <span class="unixoutputc">ALLOC_GEN_ADVANCE_PERIOD</span> must be specified with undefined values.</li></ul></li><li class="listbullet">One-off or dynamic, and the entitlement is being updated from recurring, the following fields must be specified with undefined values:<ul class="listdashbullet2"><li class="listdashbullet2"><span class="unixoutputc">BILL_CYCLE_IND_CODE</span></li><li class="listdashbullet2"><span class="unixoutputc">NEXT_TASK_ID</span></li><li class="listdashbullet2"><span class="unixoutputc">PRORATE_FUNCTION_DEFN_ID</span></li><li class="listdashbullet2"><span class="unixoutputc">PRORATE_IND_CODE</span></li><li class="listdashbullet2"><span class="unixoutputc">RECURRING_ALLOCATION_AMOUNT</span></li><li class="listdashbullet2"><span class="unixoutputc">RECURRING_PERIOD.</span></li></ul></li><li class="listbullet">Recurring:<ul class="listdashbullet2"><li class="listdashbullet2"><span class="unixoutputc">RECURRING_ALLOCATION_AMOUNT</span> and <span class="unixoutputc">ALLOC_GEN_ADVANCE_PERIOD</span> must be defined with a value of zero or greater.</li><li class="listdashbullet2">A recurring period must be defined using <span class="unixoutputc">RECURRING_PERIOD_UNIT_CODE</span> and <span class="unixoutputc">RECURRING_PERIOD</span>.</li></ul></li></ul><p class="bodytext">If the entitlement is recurring and aligned with customer bill cycles: </p>
<ul class="listbullet"><li class="listbullet">This function checks for changes to the associated billing schedule as part of the update. <p class="listcontinue">If the billing schedule has changed, this function updates the expiry date of existing allocations, and reschedules the function that creates the next allocation for the entitlement. </p>
</li><li class="listbullet">Tasks for the bill run must be prescheduled for the whole validity period of the recurring entitlement.</li></ul><p class="bodytext"><span class="unixoutputc">SUSPENDED_IND_CODE</span> of an expired entitlement cannot be updated.</p>
<p class="bodytext">The values of the <span class="unixoutputc">ENTITLEMENT_TYPE_ID</span>, <span class="unixoutputc">ENTITLEMENT_TYPE_NAME</span>, <span class="unixoutputc">ENTITLEMENT_CATEGORY_CODE</span>, and <span class="unixoutputc">CONTEXT_CODE</span> can not be updated.</p>
<p class="bodytext">If the entitlement is not suspended (<span class="unixoutputc">SUSPENDED_IND_CODE</span> is not 1), or is suspended but has <span class="unixoutputc">ENTITLEMENT_ALLOCATION</span> records, the <span class="unixoutputc"><a id="h59474" class="jump" title="EntitlementReload&amp;()" href="58720.htm" target="_self">EntitlementReload&amp;()</a></span> function is used to update the entitlement's data in the temporal entitlements cache using the entitlement ID.</p>
<p class="bodytext">It is recommended that the trerate_tran server be configured when this function is used. For information about configuring the trerate_tran server, refer to the <span class="referrals">System Configuration Guide for Singleview Convergent Billing</span>.</p>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="58416.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="60596.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


