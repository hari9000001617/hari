<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> fEV_CustomerCancel&amp;() </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Configurer's Reference Guide for Singleview Convergent Billing 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "28078.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "28080.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('51544');expand('28068');expand('45618');highlight('28079')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="28078.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="28080.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h4 class="heading4">fEV_CustomerCancel&amp;()</h4>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic 'fEV_CustomerCancel&amp;()' (28079)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="syntaxheading">Syntax</p>
<table class="tableintopic" width="504" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse">
<tr align="left" valign="top">
<td class="tableheading" width="228"><p class="tableheading">Interface 1</p>
</td>
<td width="48"><p class="tablebodytext">&nbsp;</p>
</td>
<td class="tableheading" width="228"><p class="tableheading">Interface 2</p>
</td>
</tr>
<tr align="left" valign="top">
<td width="228"><pre class="unixinputp">fEV_CustomerCancel&amp;(    customerId&amp;,    cancellationDate~,    var lastModified~,    billCycle?)&nbsp;</pre>
</td>
<td width="48"><pre class="unixinputp">&nbsp;</pre>
</td>
<td width="228"><pre class="unixinputp">fEV_CustomerCancel&amp;(    customerId&amp;,    cancellationDate~,    var lastModified~,    const fieldValues?{})</pre>
</td>
</tr>
<tr align="left" valign="top">
<td class="tableheading" width="228"><p class="tableheading">Interface 3</p>
</td>
<td width="48"><pre class="unixinputp">&nbsp;</pre>
</td>
<td width="228"><pre class="unixinputp">&nbsp;</pre>
</td>
</tr>
<tr align="left" valign="top">
<td width="228"><pre class="unixinputp">fEV_CustomerCancel&amp;(    customerId&amp;,    cancellationDate~,    var lastModified~,    const fieldNames$[],    const fieldValues?[])</pre>
</td>
<td width="48"><pre class="unixinputp">&nbsp;</pre>
</td>
<td width="228"><pre class="unixinputp">&nbsp;</pre>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Description</p>
<p class="bodytext">Cancels a customer as of a specified date.</p>
<p class="syntaxheading">Context</p>
<p class="bodytext">The following groups of variables are available throughout all stages of processing a customer cancellation request, except where otherwise specified:</p>
<ul class="listbullet"><li class="listbullet">System client</li><li class="listbullet">Operator</li><li class="listbullet">Miscellaneous<ul class="listdashbullet2"><li class="listdashbullet2"><span class="unixoutputc">EvFormCode$</span> contains the value <span class="unixoutputc">CNTRSVR</span>.</li><li class="listdashbullet2"><span class="unixoutputc">EvLastRowInd&amp;</span> contains the value <span class="unixoutputc">0</span> during all stages of processing except for the evaluation of the contract pre-commit expressions.</li><li class="listdashbullet2"><span class="unixoutputc">EvRowStatus$</span> contains the value <span class="unixoutputc">Update</span>.</li></ul></li><li class="listbullet">Contract.</li></ul><p class="syntaxheading">Parameters</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="151"><p class="tableheading">Parameter</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="545"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="151"><p class="tablebodytext"><span class="unixoutputc">customerId&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="545"><p class="tablebodytext">ID of the customer to be cancelled.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="151"><p class="tablebodytext"><span class="unixoutputc">cancellationDate~</span></p>
</td>
<td style="border:1px solid #010101;" width="545"><p class="tablebodytext">Date on which the cancellation becomes effective.</p>
<p class="tablebodytext">If undefined, it defaults to the current date.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="151"><p class="tablebodytext"><span class="unixoutputc">lastModified~</span></p>
</td>
<td style="border:1px solid #010101;" width="545"><p class="tablebodytext">Date-time of the last modification made to this customer.</p>
<p class="tablebodytext">It is used to perform optimistic locking checks.  On return it contains the date-time of this modification on the server.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="151"><p class="tablebodytext"><span class="unixoutputc">billCycle?</span></p>
</td>
<td style="border:1px solid #010101;" width="545"><p class="tablebodytext">Bill cycle to use for this customer's final invoice.</p>
<p class="tablebodytext">It can be specified as either an integer or a string, which specifies the numeric ID or the name of the schedule for the bill cycle.</p>
<p class="tablebodytext">If left undefined, the customer's current bill cycle is used.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="151"><p class="tablebodytext"><span class="unixoutputc">fieldValues?{}</span></p>
<p class="tablebodytext"><span class="unixoutputc">fieldNames$[]</span></p>
<p class="tablebodytext"><span class="unixoutputc">fieldValues?[]</span></p>
</td>
<td style="border:1px solid #010101;" width="545"><p class="tablebodytext">Data relating to the cancellation of this customer. </p>
<table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="tablenote">The EVS keys listed are only defaults and may be overridden using appropriate configuration in the cancellation entity validation.</p></td></tr></table>
<p class="tablebodytext">The table below lists recognised column names.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="caption">fieldValues?{} Column Names</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th class="tableheading" style="border:1px solid #010101;" width="156"><p class="tableheading">Column</p>
</th>
<th class="tableheading" style="border:1px solid #010101;" width="102"><p class="tableheading">Key</p>
</th>
<th class="tableheading" style="border:1px solid #010101;" width="90"><p class="tableheading">Type</p>
</th>
<th class="tableheading" style="border:1px solid #010101;" width="348"><p class="tableheading">Description</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext"><span class="unixoutputc">GENERATE_INVOICE_</span><br><span class="unixoutputc">IND_CODE</span></p>
</td>
<td style="border:1px solid #010101;" width="102"><p class="tablebodytext">Generate Invoice Immediately</p>
</td>
<td style="border:1px solid #010101;" width="90"><p class="tablebodytext">Integer (Boolean)</p>
</td>
<td style="border:1px solid #010101;" width="348"><p class="tablebodytext">If specified with a non-zero value, the <span class="unixoutputc">SCHEDULE_ID</span> for the customer is not updated in the database and the post commit expression is evaluated as part of the cancellation.</p>
<p class="tablebodytext">It is assumed that the post commit expression will contain the appropriate code to schedule the immediate invoice task, and take whatever action is required to notify the user or system that originated this request.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext"><span class="unixoutputc">GENERAL_1</span> to <span class="unixoutputc">GENERAL_13</span></p>
</td>
<td style="border:1px solid #010101;" width="102"><p class="tablebodytext">N/A</p>
</td>
<td style="border:1px solid #010101;" width="90"><p class="tablebodytext">String</p>
</td>
<td style="border:1px solid #010101;" width="348"><p class="tablebodytext">General fields 1 - 13 that can be used to specify any details required for the final immediate invoice task.</p>
<p class="tablebodytext">Any values specified for these fields are unlikely to be relevant unless the <span class="unixoutputc">GENERATE_INVOICE_IND_CODE</span> flag is True.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext"><span class="unixoutputc">OUTPUT_DEVICE_ID</span></p>
</td>
<td style="border:1px solid #010101;" width="102"><p class="tablebodytext">N/A</p>
</td>
<td style="border:1px solid #010101;" width="90"><p class="tablebodytext">Integer</p>
</td>
<td style="border:1px solid #010101;" width="348"><p class="tablebodytext">Numeric code indicating the output device, if any, to use to output the final immediate invoice.</p>
<p class="tablebodytext">Any value specified for this field is unlikely to be relevant unless the <span class="unixoutputc">GENERATE_INVOICE_IND_CODE</span> flag is True.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext"><span class="unixoutputc">SCHEDULE_ID</span></p>
</td>
<td style="border:1px solid #010101;" width="102"><p class="tablebodytext">Invoice Cycle</p>
</td>
<td style="border:1px solid #010101;" width="90"><p class="tablebodytext">Normalised Integer</p>
</td>
<td style="border:1px solid #010101;" width="348"><p class="tablebodytext">Invoice cycle to be used to produce the final invoice for this customer.</p>
<p class="tablebodytext">It is used to update the customer's bill cycle during cancellation if an immediate invoice has not been requested.  If an immediate invoice is requested, the value of this field has no effect outside the customer cancellation row and pre-commit expressions.</p>
</td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Processing</p>
<p class="bodytext">Assuming that all processing stages are enabled, the following list is the order of evaluation of expressions before the cancellation of the customer:</p>
<ol class="listnumber"><li class="listnumber">Bundle direct variables if the call is nested.</li><li class="listnumber">Initialise variables.</li><li class="listnumber">Decrypt any encrypted values and mask any appropriate values .</li><li class="listnumber">Evaluate customer cancellation defaults.</li><li class="listnumber">Evaluate customer cancellation row expressions.</li><li class="listnumber">Evaluate customer cancellation pre-commit expressions.</li><li class="listnumber">Apply relevant values to the customer variables.</li><li class="listnumber">Evaluate customer pre-commit expressions.</li><li class="listnumber">Unmask any masked values and encrypt any variable values configured for encryption.</li><li class="listnumber">Update (cancel) the customer.</li><li class="listnumber">Evaluate the customer cancellation in-transaction expressions.</li><li class="listnumber">Queue and evaluate customer cancellation post-commit expressions.</li><li class="listnumber">Evaluate the customer in-transaction expressions.</li><li class="listnumber">Queue and evaluate customer post-commit expressions.</li><li class="listnumber">Unbundle variables stored in step 1. </li></ol><table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="note">Address processing only occurs for addresses that have at least one field specified.  Zero or more rows of invoice format data can be specified.  Invoice format processing is performed once for each row of invoice format data.</p></td></tr></table>
<p class="syntaxheading">Returns</p>
<p class="bodytext">On success, a non-zero value is returned.  If the cancellation fails, an error is raised.</p>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="28078.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="28080.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Configurer's Reference Guide for Singleview Convergent Billing 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


