<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title> PECFileDownload&amp;() </title>
<script type="text/javascript" src="open_parent.js"></script>
<link rel="stylesheet" type="text/css" href="pkc.css">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<meta name="description" content="Online Help for Configuration Workbench for Singleview Process Engine 9.1 ">
<script language="javascript" type="text/javascript" src="dhtml_toc.js"></script>
<script language="JavaScript">
<!--

document.onkeydown = checkChangePage;
function checkChangePage(e)
{
   if (!e) var e = window.event;
   // Don't put the following into the first page
   if ((e.ctrlKey && (e.keyCode == 37))) {
      // Ctrl-Left Arrow was pressed or Page up key pressed at the top of the page
      document.location.href = "9409.htm";
   } else
   // Don't put the following into the late page for a document
   if ((e.ctrlKey && (e.keyCode == 39))) {
      // Ctrl-Right Arrow was pressed or Page down key pressed and at the bottom of the page
      document.location.href = "58887.htm";
   }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function printpage()
{
	window.print();
}
//-->
</script>
</head>
<body onload="loadParent();MM_preloadImages('left_down.gif','right_down.gif','index_down.gif','contents_down.gif','search_down.gif','print_down.gif');if (isTOCLoaded()) {expand('57331');expand('11011');highlight('58886')}">
<div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="9409.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="58887.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Online Help for Configuration Workbench for Singleview Process Engine 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td width="100%">
<h3 class="heading3">PECFileDownload&amp;()</h3>
</td><td class="feedback"><p><a href="mailto:ipoint@csgi.com?subject=Feedback on Topic 'PECFileDownload&amp;()' (58886)"><img border=0 src="email.png" alt="Provide feedback on this topic"></a></p></td></tr></table><p class="syntaxheading">Syntax</p>
<pre class="unixinputp">PECFileDownload&amp;(    ClientID$,    SourceLocation$,    PromptUser&amp;,    PresetDestination$)</pre>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Description</p>
<p class="bodytext">Downloads a file from a file server to a PC hosting a Process Engine web client instance.  When the download is complete, the file is opened by the associated program using Windows.</p>
<p class="syntaxheading">Parameters</p>
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td class="tableheading" style="border:1px solid #010101;" width="168"><p class="tableheading">Parameter</p>
</td>
<td class="tableheading" style="border:1px solid #010101;" width="528"><p class="tableheading">Description</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext"><span class="unixoutputc">ClientID$</span></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">ID of the client instance to download the file to.</p>
<p class="tablebodytext">Pass a null string to indicate the current client.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext"><span class="unixoutputc">SourceLocation$</span></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">Source location and file name of the file to download.</p>
<p class="tablebodytext">If the location is prefixed with <span class="unixoutputc">sv://</span>, this is automatically removed.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext"><span class="unixoutputc">PromptUser&amp;</span></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">Flag indicating whether to prompt for the location to download the file to.</p>
<p class="tablebodytext">If set to 1, prompts for the location; otherwise, does not prompt and the file is downloaded to the location specified in <span class="unixoutputc">PresetDestination$</span>.</p>
<table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="tablenote">It is deprecated and maintained for backward compatibility with Process Engine Windows client.</p></td></tr></table>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext"><span class="unixoutputc">PresetDestination$</span></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">Location to download the file to.</p>
<p class="tablebodytext">Browser settings can override this parameter with the outcome depending on the value specified. This function uses only the file name portion of the path. This means that if the value is set to:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">A complete path (that is, <span class="unixoutputc">&lt;directory&gt;/&lt;file_name&gt;)</span>, <span class="unixoutputc">&lt;directory&gt;</span> is ignored and the file is downloaded with the name specified in <span class="unixoutputc">&lt;file_name&gt;</span>. </li><li class="tablelistbullet"><span class="unixoutputc">null$</span> or <span class="unixoutputc">&lt;file_name&gt;</span>, the file name specified in <span class="unixoutputc">SourceLocation&amp;</span> is used.</li></ul></td>
</tr>

</table>
<p class="bodytext">&nbsp;</p>
<p class="syntaxheading">Returns</p>
<p class="bodytext">Integer representing the result from the <span class="unixoutputc">treClientNotify</span> call.</p>
<p class="syntaxheading">Remarks</p>
<p class="bodytext">The function calls <span class="unixoutputc">biFileDownloadSize&amp;()</span> and if this call is successful, it calls <span class="unixoutputc">biFileDownload@()</span> to download the file (see the <span class="referrals">Configurer's Reference Guide for Singleview Convergent Billing</span>).  </p>
<p class="bodytext">A <span class="formname">Downloading</span> window is displayed, and downloads can be cancelled by clicking the <strong class="buttons">Cancel</strong> button.</p>
<table width="100%" class="notestyle"><tr><td><p class="note">Note:</p><p class="note">Double back-slashes (<span class="unixoutputc">\\</span>) are required in EPM to represent one back-slash (<span class="unixoutputc">\</span>) for directory locations.</p></td></tr></table>
<p class="bodytext">For single-click downloads, the function must be called from an On Client Request trigger, and the <span class="unixoutputc">UserPrompt&amp;</span> parameter set to 0.  The On Client Request trigger can be placed on a button or menu operation.</p>
<p class="bodytext">For more information about file downloads, refer to Secure File Transfer.</p>
<p class="bodytext">In Process Engine web client, the <span class="unixoutputc">PromptUser&amp;</span> parameter is ignored and the <span class="formname">Save As</span> pop-up is displayed.  The value in the <span class="unixoutputc">PresetDestination$</span> parameter, if any, is displayed as the default value in the <span class="fieldname">File name</span> field in the pop-up.</p>
<p class="syntaxheading">Example</p>
<p class="bodytext">The following On Client Request trigger on an operation downloads the file to the specified location without prompting the user.</p>
<pre class="unixoutputp">{<br>PECFileDownload&amp;(treClientGetId$(), 'sv://SecureDownload/SecureFileTransfer_LargeFile1.pdf', 0, 'DownloadedFile_1.pdf');<br>}</pre>


<br><div class="menubar">  <table width="100%" border="0" cellspacing="0" cellpadding="0">    <tr valign="middle">      <td width="70">        <a href="9409.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('left','','left_down.gif',1)">        <img name="left" border="0" src="left_up.gif" width="26" height="26" alt="Previous topic" title="Previous topic"></a>        <a href="58887.htm" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('right','','right_down.gif',1)">        <img name="right" border="0" src="right_up.gif" width="26" height="26" alt="Next topic" title="Next topic"></a></td>        <td class="bodytext">Online Help for Configuration Workbench for Singleview Process Engine 9.1 </td>        <td width="40">        <div align="center">        <a href="javascript:printpage();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('print','','print_down.gif',1)">        <img name="print" border="0" src="print_up.gif" width="26" height="26" alt="Print this page" title="Print this page"></a>      </div>       </td></tr>  </table></div></body>
</html>


